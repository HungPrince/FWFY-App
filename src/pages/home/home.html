<ion-header>
    <ion-navbar color="primary">
        <button ion-button menuToggle>
            <ion-icon name="menu"></ion-icon>
        </button>
        <ion-title>List Post</ion-title>
        <ion-buttons end color="Secondary" (click)="logout()">
            <button ion-button>
                <ion-icon name="md-log-out"></ion-icon>
            </button>
        </ion-buttons>
    </ion-navbar>

    <ion-toolbar>
        <ion-searchbar  (ionInput)="getListPost($event)" autocorrect="off"></ion-searchbar>
        <button class="btn-search-advanced" positionV ="bottom" duration = '500' ion-button tooltip="{{textShowHideAdvanced}} search advanced" (click)="showSearchAdvanced()">{{ textShowHideAdvanced }}</button>
    </ion-toolbar>
</ion-header>
<ion-content *ngIf="listPost">
    <ion-list *ngIf="searchAdvandced">
        <ion-item>
            <ion-label>City</ion-label>
            <ion-select [(ngModel)]="city" name="city">
                <ion-option *ngFor="let city of listCity" (ionSelect)="searchPost(city.name_with_type)" value="{{city.name_with_type}}">{{city.name_with_type}}</ion-option>
            </ion-select>
        </ion-item>
        <ion-item>
            <ion-label>Employment Type</ion-label>
            <ion-select [(ngModel)]="type" name="type">
                <ion-option  *ngFor="let type of types" value="{{ type }}" (ionSelect)="searchPost(type)">{{ type }}</ion-option>
            </ion-select>
        </ion-item>
        <ion-item>
            <ion-label>Seniority level</ion-label>
            <ion-select [(ngModel)]="level" name="level">
                <ion-option *ngFor="let level of levels" value="{{ level }}" (ionSelect)="searchPost(level)">{{ level }}</ion-option>
            </ion-select>
        </ion-item>
    </ion-list>
    <post *ngFor="let post of listPost" [postI] ="post"></post>
    <!-- <ion-card *ngFor="let post of listPost">
        <ion-item>
            <ion-avatar item-start>
                <img (click)="viewDetailUserPost(post.user)" src="{{ post.user.avatar_url }}">
            </ion-avatar>
            <h2>{{ post.user.name }}</h2>
            <p>{{ post.user.age }}, {{ post.user.gender ? "Male": "Female" }}</p>
            <ion-fab *ngIf="post.ownPost" top right edge fab-fixed class="more-action-post" (click)="openModalEdit(post.post)">
                <button ion-fab mini><ion-icon name="create"></ion-icon></button>
            </ion-fab>
        </ion-item>

        <img *ngIf="post.post.image_url" (click)="openModalDetail(post.post)" class="img-post" src="{{ post.post.image_url }}">

        <ion-card-content (click)="openModalDetail(post.post)">
            <h2><ion-icon color="primary" ios="ios-archive" md="md-archive"></ion-icon>  {{ post.post.title }}</h2><br/>
            <p><ion-icon color="primary" name="md-calendar"></ion-icon>  {{ post.post.dateFrom | moment:['ll'] }} - {{ post.post.dateTo | moment:['ll'] }}</p><br/>
            <p><ion-icon color="primary" ios="ios-book" md="md-book"></ion-icon>  {{ post.post.description }}</p>
        </ion-card-content>

        <ion-grid>
            <ion-row>
                <ion-col col-4 class="action-post" (click)="likePost(post.post)">
                    <button ion-button icon-left clear small>
                        <ion-icon  name="{{ getNameIconLike(post) }}"></ion-icon>
                        <div>{{ countLikes(post) }}</div>
                    </button>
                </ion-col>
                <ion-col col-4 class="action-post" (click)="savePost(post.post.key)">
                    <button ion-button icon-left clear small>
                        <ion-icon *ngIf="userCurrent.saves && userCurrent.saves[post.post.key]" name="heart"></ion-icon>
                        <ion-icon *ngIf="!(userCurrent.saves && userCurrent.saves[post.post.key])" name="heart-outline"></ion-icon>
                        <div>Save</div>
                    </button>
                </ion-col>
                <ion-col col-4 class="action-post">
                    <button ion-button icon-left clear small>
                        <ion-icon name="text"></ion-icon>
                        <div>4 Comments</div>
                    </button>
                </ion-col>
            </ion-row>
            <ion-row>
                <ion-col center text-center>
                    <ion-note>
                        {{  post.post.updatedAt ? (post.post.updatedAt | timeAgo) : post.post.createdAt  | timeAgo }}
                    </ion-note>
                </ion-col>
            </ion-row>
            <ion-row>
                <ion-col center text-center>
                    <button (click)="sharePost(post.post)" small ion-button outline><ion-icon name="md-share"></ion-icon></button>
                </ion-col>
            </ion-row>
        </ion-grid>
    </ion-card> -->

    <button *ngIf="userCurrent &&  (userCurrent.role == 'recuiter' || userCurrent.role == 'admin')" color="danger" mini ion-fab="" class="fab fab-ios fab-ios-danger" id="add-post" (click)="openModalAdd()">
        <ion-icon class="fab-close-icon icon icon-ios ion-ios-close" name="close" role="img" aria-label="close"></ion-icon>
        <span class="button-inner">
            <ion-icon name="add" role="img" class="icon icon-ios ion-ios-add" aria-label="add"></ion-icon>
        </span>
        <div class="button-effect">
        </div>
    </button>

</ion-content>
